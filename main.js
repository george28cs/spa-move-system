!function(e){var t={};function n(d){if(t[d])return t[d].exports;var o=t[d]={i:d,l:!1,exports:{}};return e[d].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,d){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:d})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var d=Object.create(null);if(n.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(d,o,function(t){return e[t]}.bind(null,o));return d},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var d=()=>'\n      <div class="Header-main">\n        <div class="Header-logo">\n          <h1>\n            <a href="#">\n              Tu App de Mudanzas\n            </a>\n          </h1>\n          <img class="logo" src="https://www.transportesanson.com/img/icono-mudanza.png" alt="mudanza-icon">\n\n        </div>\n        <div class="Header-nav">\n        </div>\n      </div>\n    ';var o=async()=>'\n     <section class="administrator">\n        <div class="add-route">\n            <div class="admin-header">\n                <h2>Agregar rutas ...\n                </h2>\n            </div>\n            <div class="">\n                <div>\n                    <div>\n                        <label>Origen</label>\n                        <input value="Escribe el origen" id="origin">\n                        \n                    </div>\n                </div>\n            </div>\n            <div class="">\n                <div>\n                    <div>        \n                        <label>Destino</label>\n                        <input value="Escribe el destino" id="destination">\n                    </div>\n                </div>\n            </div>\n            \n            <div>\n                <div>\n                    <label>Precio</label>\n                    <input value="Escribe el precio" id="price">\n                    \n                </div>\n            </div>\n\n            <button id="addRoutesButton">\n                Agregar Ruta\n            </button>\n            <p id="no-routes"></p>\n            <div class="print-routes" id="print-routes">\n                \n            </div>\n        </div>\n\n        <div class="get-routes">\n            <div>\n                Administración de rutas\n            </div>\n            <button id="get-routes">\n                Ver Rutas disponibles\n            </button>\n            </div>\n        </div>\n        <div class="get-trucks">\n            <div>\n                Administración de Camiones\n            </div>\n            <button id="get-trucks">\n                Ver/editar Camiones\n            </button>\n            <div class="print-trucks" id="print-trucks">\n            </div>\n        </div>\n    </section>\n    ';var i=()=>'\n     <section class="home">\n        <div class="img-background"></div>\n        <div class="seach-bar">\n        <div class="search-bar__title">\n            <h2>\n                Bienvenido a tu app de mudanzas, por favor, selecciona una opción...\n            </h2>\n        </div>\n        <div class="options">\n            <a href="#/admin">\n                Administrar rutas y camiones\n            </a>\n        </div>\n        <div class="options">\n            <a href="#/client">\n                Clientes\n            </a>\n        </div>\n        <div class="options">\n            <a href="#/orders">\n                Órdenes\n            </a>\n        </div>\n        \n        </div>\n     </section>\n    ';var a=()=>'\n      <div class="Error404">\n        <h2>Error 404</h2>\n        <div>\n            Esta página no existe, por favor verifica la dirección\n        </div>\n      </div>\n    ';var c=()=>'\n    <div class="orders">\n    <div class="orders__title">\n      <h2>\n          Consulta tus órdenes\n      </h2>\n    </div>\n      <div>\n        <div>\n          Por favor ingresa tu correo para consultar las órdenes generadas\n        </div>\n        <div>\n          <label for="client-mail">Correo:</label>\n          <input type="text" name="client-mail" id="clientMail"> <br>\n          <div>\n            <button id="getOrders">\n              Obtener órdenes\n            </button>\n            <div class="client-orders" id="clientOrders">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  ';var r=()=>'\n     <section class="client">\n        <div class="select-route">\n            <div class="select-route__title">\n                <h2>\n                    Selecciona la ruta... \n                </h2>   \n            </div>\n            <div class="">\n                <div>\n                    <div>\n                        <select name="origin" id="origin-dropdown">\n                        </select>\n                    </div>\n                </div>\n            </div>\n            <div class="">\n                <div>\n                    <div>\n                        <select name="destination" id="destination-dropdown">\n                        </select>\n                    </div>\n                </div>\n            </div>\n            <button id="select-route">\n                Seleccionar ruta\n            </button>\n        </div>\n        <div class="select-trucks">\n            <div class="display-trucks" id="display-trucks" style="display: none;">\n                Por favor selecciona el tipo de camión y espacio que requieres\n            </div>\n            <div class="print-trucks" id="print-trucks">\n\n            </div>\n        </div>\n        <div class="print-selectedTruck" id="printSelectedTruck">\n        </div>\n        <div class="print-selectSpace" id="setSpaceRequired" style="display: none">\n            <label for="lname">Selecciona la cantidad requerida (m<sup>2</sup>):</label>\n            <input type="number" name="lname" id="spaceRequired">\n            <button id="sendSpace">\n                Generar preorden\n            </button>\n            \n            <div id="printPreorder">\n            </div>\n            <div class"get-order" id="orderForm" style="display: none">\n                <div class="client-data" id="registerClient">\n                    <label for="client-name">Por favor ingresa tu nombre</label>\n                    <input type="text" name="client-name" id="clientName"> <br>\n                    <label for="client-lastName">Por favor ingresa tu apellido</label>\n                    <input type="text" name="client-lastName" id="clientLastName"><br>\n                    <label for="client-mail">Por favor ingresa tu correo</label>\n                    <input type="text" name="client-mail" id="clientMail">\n                </div>\n                <div><br>\n                    <button id="getOrder">\n                        Agregar orden\n                    </button>\n                </div>\n            </div>\n            \n        </div>\n     </section>\n    ';var l=()=>location.hash.slice(1).toLocaleLowerCase().split("/")[1]||"/";var s=e=>{if(e.length<=1){let t;return t="/"===e?e:"/orders/:id",t}return"/"+e};class p{constructor(e,t,n){this.origin=e,this.destination=t,this.price=n}}class u{constructor(e,t,n){this.name=e,this.lastName=t,this.email=n}}class m{constructor(e,t,n,d,o,i){this.id=e,this.clientmail=t,this.origin=n,this.destination=d,this.space=o,this.price=i}}const h="https://my-json-server.typicode.com/george28cs/json-faker-server/trucks/";var v=async(e,t)=>{const n={method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)},d=e?`${h}${e}`:h;try{const e=await fetch(d,n);return await e.json()}catch(e){console.log("Fetch Error",e)}};var g=async()=>{try{const e=await fetch("https://my-json-server.typicode.com/george28cs/json-faker-server/trucks/");return await e.json()}catch(e){console.log("Fetch Error",e)}};const E=()=>localStorage.getItem("routes-availables"),C=()=>{if(null==E()){const e='{"routes": []}';localStorage.setItem("routes-availables",e)}},f=()=>{document.getElementById("no-routes").innerHTML="";const e=document.getElementById("origin").value,t=document.getElementById("destination").value;let n=parseFloat(document.getElementById("price").value);if(""!=e&&""!=t&&Number.isInteger(n)){const d=JSON.parse(E()),o=new p(e,t,n);d.routes.push(o),localStorage.setItem("routes-availables",JSON.stringify(d)),b()}else alert("Por favor ingrese un precio válido")},y=()=>{const e=JSON.parse(E()),t=document.getElementById("no-routes");0==e.routes.length?t.innerHTML="No hay rutas existentes, aguegue alguna primero":b()},b=()=>{const e=JSON.parse(E()),t=document.getElementById("print-routes");t.textContent="";const n=document.createElement("table");n.setAttribute("id","routesTable");const d=document.createElement("thead"),o=document.createElement("tr"),i=document.createElement("td"),a=document.createTextNode("ID");i.appendChild(a),o.appendChild(i);const c=document.createElement("td"),r=document.createTextNode("Origen");c.appendChild(r),o.appendChild(c);const l=document.createElement("td"),s=document.createTextNode("Destino");l.appendChild(s),o.appendChild(l);const p=document.createElement("td"),u=document.createTextNode("Precio");p.appendChild(u),o.appendChild(p);const m=document.createElement("td"),h=document.createTextNode("Eliminar");m.appendChild(h),o.appendChild(m),d.appendChild(o),n.appendChild(d);const v=document.createElement("tbody"),g=e.routes.length;for(let t=0;t<g;t++){const n=document.createElement("tr");for(let d=0;d<=4;d++)if(0==d){const e=document.createElement("td"),d=document.createTextNode(""+(t+1));e.appendChild(d),n.appendChild(e)}else if(1==d){const d=document.createElement("td"),o=document.createTextNode(""+e.routes[t].origin);d.appendChild(o),n.appendChild(d)}else if(2==d){const d=document.createElement("td"),o=document.createTextNode(""+e.routes[t].destination);d.appendChild(o),n.appendChild(d)}else if(3==d){const d=document.createElement("td"),o=document.createTextNode("$"+e.routes[t].price);d.appendChild(o),n.appendChild(d)}else if(4==d){const e=document.createElement("td"),t=document.createElement("button"),d=document.createTextNode("Eliminar");t.className="remove-routes",t.appendChild(d),e.appendChild(t),n.appendChild(e)}v.appendChild(n)}n.appendChild(v),t.appendChild(n),n.setAttribute("border","2");const C=document.getElementsByClassName("remove-routes");x(C)},x=e=>{for(let t=0;t<e.length;t++)e[t].onclick=function(){const e=this.parentElement.parentElement.childNodes[0].outerText;T(e)}},N=e=>{for(let t=0;t<e.length;t++)e[t].onclick=function(){const n=this.parentElement.parentElement.childNodes;e[t].textContent="Guardar";for(let e=1;e<n.length-1;e++)n[e].setAttribute("contentEditable",!0);e[t].onclick=function(){const d=t+1,o=n[1].textContent,i=n[2].textContent,a=n[3].textContent,c=n[4].textContent,r=n[5].textContent;I(d,{id:d,truck_type:o,total_space:i,available_space:a,sqr_meter_price:c,total:r}),e[t].textContent="Editar";for(let e=1;e<n.length-1;e++)n[e].setAttribute("contentEditable",!1),S()}}},T=e=>{const t=parseInt(e-1),n=JSON.parse(E());if(n.routes.splice(t,1),localStorage.setItem("routes-availables",JSON.stringify(n)),0!=n.routes.length)b();else{document.getElementById("print-routes").textContent="",C()}},I=async(e,t)=>{await v(e,t)},S=async()=>{const e=await g(),t=document.getElementById("print-trucks");t.textContent="";const n=document.createElement("table");n.setAttribute("id","view-Trucks");const d=document.createElement("thead"),o=document.createElement("tr"),i=document.createElement("td"),a=document.createTextNode("Item");i.appendChild(a),o.appendChild(i);const c=document.createElement("td"),r=document.createTextNode("Modelo del camión");c.appendChild(r),o.appendChild(c);const l=document.createElement("td"),s=document.createTextNode("Espacio total");l.appendChild(s),o.appendChild(l);const p=document.createElement("td"),u=document.createTextNode("Espacio Disponible");p.appendChild(u),o.appendChild(p);const m=document.createElement("td"),h=document.createTextNode("Precio M2");m.appendChild(h),o.appendChild(m);const v=document.createElement("td"),E=document.createTextNode("# De vehículos");v.appendChild(E),o.appendChild(v);const C=document.createElement("td"),f=document.createTextNode("Editar");C.appendChild(f),o.appendChild(C),d.appendChild(o),n.appendChild(d);const y=document.createElement("tbody"),b=e.length;for(let t=0;t<b;t++){const n=document.createElement("tr");for(let d=0;d<=8;d++){if(0==d){const d=document.createElement("td"),o=document.createTextNode(""+e[t].id);d.appendChild(o),n.appendChild(d)}if(1==d){const d=document.createElement("td"),o=document.createTextNode(""+e[t].truck_type);d.appendChild(o),n.appendChild(d)}if(2==d){const d=document.createElement("td"),o=document.createTextNode(""+e[t].total_space);d.appendChild(o),n.appendChild(d)}if(3==d){const d=document.createElement("td"),o=document.createTextNode(""+e[t].available_space);d.appendChild(o),n.appendChild(d)}if(4==d){const d=document.createElement("td"),o=document.createTextNode("$"+e[t].sqr_meter_price);d.appendChild(o),n.appendChild(d)}if(5==d){const d=document.createElement("td"),o=document.createTextNode(""+e[t].total);d.appendChild(o),n.appendChild(d)}if(6==d){const e=document.createElement("td"),t=document.createElement("button");t.className="view-trucks";const d=document.createTextNode("Editar");t.appendChild(d),e.appendChild(t),n.appendChild(e)}}y.appendChild(n)}n.appendChild(y),t.appendChild(n),n.setAttribute("border","2");const x=document.getElementsByClassName("view-trucks");N(x)};var k=()=>{C();document.getElementById("addRoutesButton").addEventListener("click",f);document.getElementById("get-routes").addEventListener("click",y);document.getElementById("get-trucks").addEventListener("click",S)};const B=()=>localStorage.getItem("clients"),w=()=>localStorage.getItem("orders"),O=()=>{if(null==B()){const e='{"clients": []}';localStorage.setItem("clients",e)}},_=()=>{if(null==w()){const e='{"orders": []}';localStorage.setItem("orders",e)}},P=()=>localStorage.getItem("routes-availables"),A=()=>{const e=document.getElementById("origin-dropdown");e.length=0;const t=document.createElement("option");t.text="Selecciona el origen",e.add(t),e.selectedIndex=0,L();const n=JSON.parse(P()),d=n.routes,o=M(d,"origin");for(origin of o){const t=document.createElement("option");t.text=origin,e.add(t)}e.addEventListener("change",()=>J(e,n))},L=()=>{const e=document.getElementById("destination-dropdown");e.length=0;const t=document.createElement("option");t.text="Selecciona el destino",e.add(t),e.selectedIndex=0},M=(e,t)=>{const n=[];for(let d=0;d<e.length;d++)"origin"==t?n.push(e[d].origin):"destination"==t&&n.push(e[d].destination);return[...new Set(n)]},J=(e,t)=>{const n=document.getElementById("destination-dropdown"),d=e.selectedIndex,o=e.options[d].value,i=t.routes.filter(e=>e.origin==o);let a=M(i,"destination");$();for(let e=0;e<a.length;e++){const t=document.createElement("option");t.text=a[e],n.add(t)}},$=()=>{const e=document.getElementById("destination-dropdown"),t=e.options.length;for(let n=0;n<=t;n++)e.remove(n);L()},j=()=>{const e=document.getElementById("destination-dropdown");if(0==document.getElementById("origin-dropdown").selectedIndex||0==e.selectedIndex)alert("Por favor secciona todos los campos");else{document.getElementById("display-trucks").style.display="block",H()}},H=async()=>{const e=await g(),t=document.getElementById("print-trucks");t.textContent="";const n=document.createElement("table");n.setAttribute("id","view-Trucks");const d=document.createElement("thead"),o=document.createElement("tr"),i=document.createElement("td"),a=document.createTextNode("Tipo del camión");i.appendChild(a),o.appendChild(i);const c=document.createElement("td"),r=document.createTextNode("Espacio disponible");c.appendChild(r),o.appendChild(c);const l=document.createElement("td"),s=document.createTextNode("Seleccionar camión");l.appendChild(s),o.appendChild(l),d.appendChild(o),n.appendChild(d);const p=document.createElement("tbody"),u=e.length;for(let t=0;t<u;t++){const n=document.createElement("tr");for(let d=0;d<=3;d++){if(0==d){const d=document.createElement("td"),o=document.createTextNode(""+e[t].truck_type);d.appendChild(o),n.appendChild(d)}if(1==d){const d=document.createElement("td"),o=document.createTextNode(e[t].available_space+" m2");d.appendChild(o),n.appendChild(d)}if(2==d){const e=document.createElement("td"),t=document.createElement("button");t.className="select-truck";const d=document.createTextNode("Seleccionar");t.appendChild(d),e.appendChild(t),n.appendChild(e)}}p.appendChild(n)}n.appendChild(p),t.appendChild(n),n.setAttribute("border","2");const m=document.getElementsByClassName("select-truck");q(m,e)},q=(e,t)=>{for(let n=0;n<e.length;n++)e[n].onclick=function(){const e=this.parentElement.parentElement.childNodes[0].outerText;z(e,t)}},z=(e,t)=>{const n=e.toString(),d=t.filter(e=>e.truck_type==n),o=document.getElementById("printSelectedTruck"),i=document.getElementById("setSpaceRequired"),a=document.getElementById("sendSpace");i.style.display="block",o.innerHTML="Has seleccionado el camión de "+d[0].truck_type,a.addEventListener("click",()=>F(d))},F=e=>{const t=document.getElementById("spaceRequired").value;if(""==t)alert("Por favor ingrese un valor válido");else{if(((e,t)=>{const n=parseFloat(e);return parseFloat(t[0].available_space)>=n})(t,e)){let n=document.getElementById("origin-dropdown"),d=document.getElementById("destination-dropdown");const o=n.selectedIndex,i=d.selectedIndex;n=n.options[o].value,d=d.options[i].value;const a=e=>e.origin==n&&e.destination==d,c=JSON.parse(P()).routes.filter(a),r=parseFloat(e[0].sqr_meter_price)*parseFloat(t)+c[0].price;document.getElementById("printPreorder").innerHTML=`\n            <br>Origen: ${n}\n            <br>Destino: ${d}\n            <br>Tipo de camión: ${e[0].truck_type}\n            <br>Espacio seleccionado: ${t} m<sup>2</sup>\n            <br>Precio: $${r} pesos\n            `;D({origin:n,destination:d,space:t,price:r})}else alert("Por favor seleccione un camión de mayor espacio")}},D=e=>{const t=document.getElementById("orderForm"),n=document.getElementById("getOrder");t.style.display="block",n.addEventListener("click",()=>R(e))},R=e=>{const t=document.getElementById("clientName").value,n=document.getElementById("clientLastName").value,d=document.getElementById("clientMail").value,o=Z(d);if(""==t||""==n||""==d)alert("Por favor rellena todos los campos");else if(o){const o=`A${(new Date).valueOf()}MX`,i=new u(t,n,d),a=new m(o,d,e.origin,e.destination,e.space,e.price);console.log(a),G(i,a)}else alert("Por favor ingresa un correo válido")},Z=e=>!!e.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),G=(e,t)=>{const n=JSON.parse(B()),d=JSON.parse(w());n.clients.push(e),d.orders.push(t),localStorage.setItem("clients",JSON.stringify(n)),localStorage.setItem("orders",JSON.stringify(d)),window.location.href="#/orders/"};var U=()=>{O(),_(),A();document.getElementById("select-route").addEventListener("click",j)};const V=()=>localStorage.getItem("orders"),X=()=>{let e=JSON.parse(V());e=e.orders;const t=document.getElementById("clientMail").value;if(K(t)){const n=Q(t,e);n?W(n):Y()}else alert("Por favor ingrese un correo válido")},K=e=>!!e.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),Q=(e,t)=>{const n=t.filter(t=>t.clientmail==e);return n.length>0&&n},W=e=>{const t=document.getElementById("clientOrders");t.textContent="";const n=document.createElement("table");n.setAttribute("id","viewOrders");const d=document.createElement("thead"),o=document.createElement("tr"),i=document.createElement("td"),a=document.createTextNode("Orden ID");i.appendChild(a),o.appendChild(i);const c=document.createElement("td"),r=document.createTextNode("Origen");c.appendChild(r),o.appendChild(c);const l=document.createElement("td"),s=document.createTextNode("Destino");l.appendChild(s),o.appendChild(l);const p=document.createElement("td"),u=document.createTextNode("Espacio seleccionado");p.appendChild(u),o.appendChild(p);const m=document.createElement("td"),h=document.createTextNode("Precio");m.appendChild(h),o.appendChild(m);const v=document.createElement("td"),g=document.createTextNode("Precio");v.appendChild(g),o.appendChild(v),d.appendChild(o),n.appendChild(d);const E=document.createElement("tbody"),C=e.length;for(let t=0;t<C;t++){const n=document.createElement("tr");for(let d=0;d<=5;d++){if(0==d){const d=document.createElement("td"),o=document.createTextNode(""+e[t].id);d.appendChild(o),n.appendChild(d)}if(1==d){const d=document.createElement("td"),o=document.createTextNode(""+e[t].origin);d.appendChild(o),n.appendChild(d)}if(2==d){const d=document.createElement("td"),o=document.createTextNode(""+e[t].destination);d.appendChild(o),n.appendChild(d)}if(3==d){const d=document.createElement("td"),o=document.createTextNode(e[t].space+" metro cuadrado");d.appendChild(o),n.appendChild(d)}if(4==d){const d=document.createElement("td"),o=document.createTextNode("$"+e[t].price);d.appendChild(o),n.appendChild(d)}if(5==d){const e=document.createElement("td"),t=document.createElement("button");t.className="delete-order";const d=document.createTextNode("Eliminar orden");t.appendChild(d),e.appendChild(t),n.appendChild(e)}}E.appendChild(n)}n.appendChild(E),t.appendChild(n),n.setAttribute("border","2");const f=document.getElementsByClassName("delete-order");ee(f,e)},Y=()=>{const e=document.getElementById("clientOrders");e.textContent="",e.innerHTML="No existen órdenes para el correo seleccionado"},ee=e=>{for(let t=0;t<e.length;t++)e[t].onclick=function(){const e=this.parentElement.parentElement.childNodes[0].outerText;te(e)}},te=e=>{let t=JSON.parse(V());t=t.orders;const n=t.filter(t=>t.id!=e);const d=JSON.parse('{"orders": []}');for(let e=0;e<n.length;e++)d.orders.push(n[e]);localStorage.setItem("orders",JSON.stringify(d)),X()};var ne=()=>{document.getElementById("getOrders").addEventListener("click",X)};const de={"/":i,"/client":r,"/admin":o,"/orders":c};var oe=async()=>{const e=document.getElementById("header"),t=document.getElementById("content");e.innerHTML=await d();let n=l(),i=await s(n),p=de[i]?de[i]:a;t.innerHTML=await p(),p==o&&k(),p==r&&U(),p==c&&ne()};window.addEventListener("load",oe),window.addEventListener("hashchange",oe)}]);